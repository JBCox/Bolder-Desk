<div class="p-4">
  <h3 class="text-lg font-medium text-slate-800 dark:text-slate-100 mb-4">Roles & Permissions</h3>
  <div class="flex gap-6">
    <!-- Roles List -->
    <div class="w-1/3">
      <ul class="space-y-2">
        @for (role of editableRoles(); track role.id) {
          <li>
            <button (click)="selectRole(role)" 
              [class]="'w-full text-left p-2 rounded-md ' + (selectedRole()?.id === role.id ? 'bg-indigo-100 dark:bg-indigo-500/20 text-indigo-700 dark:text-indigo-300' : 'hover:bg-slate-100 dark:hover:bg-slate-700')">
              {{ role.name }}
            </button>
          </li>
        }
      </ul>
    </div>
    
    <!-- Permissions Editor -->
    <div class="w-2/3">
      @if (selectedRole(); as role) {
        <div class="p-4 border border-slate-200 dark:border-slate-700 rounded-lg">
          <h4 class="text-md font-semibold mb-1">{{ role.name }}</h4>
          <p class="text-sm text-slate-500 dark:text-slate-400 mb-4">{{ role.description }}</p>
          
          <div class="grid grid-cols-2 gap-4">
            @for (permission of allPermissions(); track permission) {
              <label class="flex items-center space-x-2">
                <input type="checkbox" 
                       [checked]="hasPermission(role, permission)"
                       (change)="togglePermission(role, permission)"
                       class="form-checkbox h-4 w-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500">
                <span class="text-sm">{{ formatPermission(permission) }}</span>
              </label>
            }
          </div>
        </div>
      } @else {
        <div class="flex items-center justify-center h-full text-slate-500 dark:text-slate-400">
          <p>Select a role to view its permissions.</p>
        </div>
      }
    </div>
  </div>
  <div class="mt-6 flex justify-end">
    <button (click)="handleSave()" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-semibold">Save Changes</button>
  </div>
</div>
